<!DOCTYPE html> 
<html>
<!-- deluser.html  -->
<head>
<meta charset="utf-8">
<title>Delete a User</title>
<link rel="stylesheet" type="text/css" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.css"> 
<script src="https://code.jquery.com/jquery-2.1.3.min.js" type="text/javascript"> </script>
<script type="text/javascript">

$(document).ready(function() {
	
        function deluser(uid) {$.getJSON("http://websys3.stern.nyu.edu/~nwhite/websys/restful/deluser.php?" +  "uid=" + uid,function(data){console.log(data)})};
	   
	// Generate the list of users
	// Each user is in their own div with an id = to their uid
	// Associate a click event with each user, which calls deluser with the uid
	//
	
     $.getJSON("http://websys3.stern.nyu.edu/~nwhite/websys/restful/getuser.php", function(data){
        console.log(data);		
       $.each(data['users'], function(index, value) {

        $('#table').append( "<div id=" + value['user']['uid'] + "  onclick=deluser(" + value['user']['uid'] + ")"  + ">");
		
		 $('#table').append(value['user']['uid'] + " " + value['user']['username'] + " " + value['user']['email']);
		
        $('#table').append("<br>") + "</div>";
			              }
);
			
                             }
				 );
                              
});


</script>

</head> 
<body> 

<div  >
	<div >
		<h1>List of Users, Click on a user to delete them</h1>
<h2> This code is currently broken.... </h2>
	</div>
	<div  id="table">	
		
	</div>
	
</div>



</body>





</html>
